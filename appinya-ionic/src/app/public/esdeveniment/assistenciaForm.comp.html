<!--

/**
 *  Appinya Open Source Project
 *  Copyright (C) 2019  Daniel Horta Vidal
 *
 *   This program is free software: you can redistribute it and/or modify
 *   it under the terms of the GNU Affero General Public License as
 *   published by the Free Software Foundation, either version 3 of the
 *   License, or (at your option) any later version.
 *
 *   This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 **/
    -->
<div class="form">
  <div class="titol">DELEGACIÓ D'ASSISTÈNCIA</div>
  <div class="usuari" *ngIf="casteller">
    <div class="fotoMarco">
      <img
        class="foto"
        [src]="casteller.Foto"
        onerror="this.src='assets/img/user/user-anonymous.jpg';"
      />
    </div>
    <div class="nombre">{{casteller.Nom + ' ' + casteller.Cognom }}</div>
  </div>

  <div
    class=""
    *ngIf="esdevenimentDetall?.OfereixTransport && assistenciaDetall.Assistire === true"
  >
    <div class="transport">
      <div class="titolTransport-icon">
        <ion-icon
          src="assets/icons/icon_transport.svg"
          class="gran"
          color="primary"
        ></ion-icon>
      </div>
      <div class="titolTransport">Transport</div>
    </div>
    <div class="linea" *ngIf="esdevenimentDetall?.OfereixTransport">
      <div class="pregunta-linea">Anada</div>
      <p-toggleButton
        class="respuesta-linea"
        slot="end"
        ample
        (onChange)="canviarFormulari()"
        [disabled]="esdevenimentDetall.BloquejarAssistencia"
        onLabel="Amb la colla"
        offLabel="Pel meu compte"
        onIcon="pi pi-compass"
        offIcon="pi pi-compass"
        [(ngModel)]="assistenciaDetall.TransportAnada"
      ></p-toggleButton>
    </div>
    <div>
      <div class="pregunta-linea">Tornada</div>
      <p-toggleButton
        ample
        (onChange)="canviarFormulari()"
        class="respuesta-linea"
        [disabled]="esdevenimentDetall.BloquejarAssistencia"
        onLabel="Amb la colla"
        offLabel="Pel meu compte"
        onIcon="pi pi-compass"
        offIcon="pi pi-compass"
        [(ngModel)]="assistenciaDetall.TransportTornada"
      ></p-toggleButton>
    </div>
  </div>
  <div class="questinari" *ngIf="assistenciaDetall.Assistire === true">
    <div
      class="pregunta-body"
      *ngFor="let pregunta of assistenciaDetall.Preguntes"
    >
      <div class="linea" *ngIf="pregunta.TipusPregunta==10">
        <div class="pregunta-linea">{{pregunta.Pregunta}}</div>
        <div class="respuesta-linea">
          <p-toggleButton
            tipus="rodo"
            (onChange)="canviarFormulari()"
            [disabled]="esdevenimentDetall.BloquejarAssistencia"
            [(ngModel)]="pregunta.Resposta"
          ></p-toggleButton>
        </div>
      </div>
      <div class="linea-row" *ngIf="pregunta.TipusPregunta==20">
        <div class="pregunta-linea">{{pregunta.Pregunta}}</div>
        <div class="respuesta-linea">
          <ion-select
            (ionChange)="canviarFormulari()"
            placeholder="Selecciona una"
            [disabled]="esdevenimentDetall.BloquejarAssistencia"
            [(ngModel)]="pregunta.Resposta"
          >
            <ion-select-option *ngFor="let item of pregunta.Valores"
              >{{item}}</ion-select-option
            >
          </ion-select>
        </div>
      </div>
      <div class="linea-row" *ngIf="pregunta.TipusPregunta==30">
        <div class="pregunta-linea">{{pregunta.Pregunta}}</div>
        <div class="respuesta-linea">
          <ion-textarea
            style="border-style: inset"
            [disabled]="esdevenimentDetall.BloquejarAssistencia"
            cols="2"
            (ionBlur)="canviarFormulari()"
            [(ngModel)]="pregunta.Resposta"
          ></ion-textarea>
        </div>
      </div>
    </div>
  </div>
  <ion-footer class="peu-assistencia">
    <div class="assistencia-div">
      <ion-button
        [disabled]="esdevenimentDetall.BloquejarAssistencia"
        (click)="confirmar(true)"
        color="tertiary"
        expand="full"
        size="large"
        style="margin: 0px 0px 0px 0px"
      >
        <ion-label [class.noseleccionat]="assistenciaDetall.Assistire !== true"
          >Assistirà</ion-label
        >
      </ion-button>
    </div>
    <div class="assistencia-div">
      <ion-button
        [disabled]="esdevenimentDetall.BloquejarAssistencia"
        expand="full"
        (click)="confirmar(false)"
        color="tertiary"
        size="large"
        style="margin: 0px 0px 0px 0px"
      >
        <ion-label [class.noseleccionat]="assistenciaDetall.Assistire !== false"
          >No assistirà
        </ion-label>
      </ion-button>
    </div>
  </ion-footer>
</div>
